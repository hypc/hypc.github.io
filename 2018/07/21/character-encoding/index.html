<!DOCTYPE html>
<html lang="">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.4.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/avatar.gif">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/avatar.gif">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/avatar.gif">
  <link rel="mask-icon" href="/images/avatar.gif" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"hypc.github.io","root":"/","scheme":"Gemini","version":"7.8.0","exturl":false,"sidebar":{"position":"right","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>

  <meta name="description" content="最近有一些朋友常问我一些乱码的问题，和他们交流过程中，发现这个编码的相关知识还真是杂乱不堪， 不少人对一些知识理解似乎也有些偏差，网上百度，google的内容，也有不少以讹传讹， 根本就是错误的（例如说 unicode编码是两个字节），各种软件让你选择编码的时候，常常是很长的一个选单，让用户不知道该如何选。 基于这样的问题，我就写下我的理解吧，一方面帮助一些需要帮助的人纠正认识，一方面作为自己以后">
<meta property="og:type" content="article">
<meta property="og:title" content="【转载】字符编码">
<meta property="og:url" content="https://hypc.github.io/2018/07/21/character-encoding/index.html">
<meta property="og:site_name" content="hypc&#39;s blog">
<meta property="og:description" content="最近有一些朋友常问我一些乱码的问题，和他们交流过程中，发现这个编码的相关知识还真是杂乱不堪， 不少人对一些知识理解似乎也有些偏差，网上百度，google的内容，也有不少以讹传讹， 根本就是错误的（例如说 unicode编码是两个字节），各种软件让你选择编码的时候，常常是很长的一个选单，让用户不知道该如何选。 基于这样的问题，我就写下我的理解吧，一方面帮助一些需要帮助的人纠正认识，一方面作为自己以后">
<meta property="og:locale">
<meta property="article:published_time" content="2018-07-21T03:07:20.000Z">
<meta property="article:modified_time" content="2020-01-04T01:48:36.196Z">
<meta property="article:author" content="hypc">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="https://hypc.github.io/2018/07/21/character-encoding/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'default'
  };
</script>

  <title>【转载】字符编码 | hypc's blog</title>
  
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-131598830-1"></script>
    <script>
      if (CONFIG.hostname === location.hostname) {
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'UA-131598830-1');
      }
    </script>






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">hypc's blog</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-fw fa-home"></i>Home</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-fw fa-archive"></i>Archives</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-fw fa-tags"></i>Tags</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>Search
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off"
           placeholder="Searching..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result">
  <div id="no-result">
    <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
  </div>
</div>

    </div>
  </div>

</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="default">
    <link itemprop="mainEntityOfPage" href="https://hypc.github.io/2018/07/21/character-encoding/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="hypc">
      <meta itemprop="description" content="业精于勤荒于嬉, 行成于思毁于随~">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="hypc's blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          【转载】字符编码
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2018-07-21 11:07:20" itemprop="dateCreated datePublished" datetime="2018-07-21T11:07:20+08:00">2018-07-21</time>
            </span>

          
            <span class="post-meta-item" title="Views" id="busuanzi_container_page_pv" style="display: none;">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">Views: </span>
              <span id="busuanzi_value_page_pv"></span>
            </span>
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="fa fa-comment-o"></i>
      </span>
      <span class="post-meta-item-text">Disqus: </span>
    
    <a title="disqus" href="/2018/07/21/character-encoding/#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="/2018/07/21/character-encoding/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <p>最近有一些朋友常问我一些乱码的问题，和他们交流过程中，发现这个编码的相关知识还真是杂乱不堪，
不少人对一些知识理解似乎也有些偏差，网上百度，google的内容，也有不少以讹传讹，
根本就是错误的（例如说 unicode编码是两个字节），各种软件让你选择编码的时候，常常是很长的一个选单，让用户不知道该如何选。
基于这样的问题，我就写下我的理解吧，一方面帮助一些需要帮助的人纠正认识，一方面作为自己以后备查的资料。</p>
<h2 id="ASCII（American-Standard-Code-for-Information-Interchange）"><a href="#ASCII（American-Standard-Code-for-Information-Interchange）" class="headerlink" title="ASCII（American Standard Code for Information Interchange）"></a>ASCII（American Standard Code for Information Interchange）</h2><p>美国信息交换标准代码，这是计算机上最早使用的通用的编码方案。
那个时候计算机还只是拉丁文字的专利，根本没有想到现在计算机的发展势头，如果想到了，可能一开始就会使用unicode了。
当时绝大部分专家都认为，要用计算机，必须熟练掌握英文。
这种编码占用7个Bit，在计算机中占用一个字节，8位，最高位没用，通讯的时候有时用作奇偶校验位。
因此ASCII编码的取值范围实际上是：<code>0x00-0x7f</code>，只能表示128个字符。
后来发现128个不太够用，做了扩展，叫做ASCII扩展编码，用足八位，取值范围变成：<code>0x00-0xff</code>，能表示256个字符。
其实这种扩展意义不大，因为256个字符表示一些非拉丁文字远远不够，但是表示拉丁文字，又用不完。
所以扩展的意义还是为了下面的ANSI编码服务。</p>
<h2 id="ANSI（American-National-Standard-Institite）"><a href="#ANSI（American-National-Standard-Institite）" class="headerlink" title="ANSI（American National Standard Institite）"></a>ANSI（American National Standard Institite）</h2><p>美国国家标准协会，也就是说，每个国家（非拉丁语系国家）自己制定自己的文字的编码规则，并得到了ANSI认可，
符合ANSI的标准，全世界在表示对应国家文字的时候都通用这种编码就叫ANSI编码。
换句话说，中国的ANSI编码和在日本的ANSI的意思是不一样的，因为都代表自己国家的文字编码标准。
比如中国的ANSI对应就是GB2312标准，日本就是JIT标准，香港，台湾对应的是BIG5标准等等。
当然这个问题也比较复杂，微软从95开始，用就是自己搞的一个标准GBK。GB2312里面只有6763个汉字，682个符号，所以确实有时候不是很够用。
GBK一直能和GB2312相互混淆并且相安无事的一个重要原因是GBK全面兼容GB2312，所以没有出现任何冲突，
你用GB2312编码的文件通过GBK去解释一定能获得相同的显示效果，换句话说：GBK对GB2312就是，你有的，我也有，你没得的，我还有！</p>
<a id="more"></a>
<p>好了，ANSI的标准是什么呢，首先是ASCII的代码你不能用！也就是说ASCII码在任何ANSI中应该都是相同的。
其他的，你们自己扩展。所以呢，中国人就把ASCII码变成8位，<code>0x7f</code>之前我不动你的，我从<code>0xa0</code>开始编，<code>0xa0-0xff</code>才95个码位，
对于中国字那简直是杯水车薪，因此，就用两个字节吧，因此编码范围就从<code>0xA1A1-0xFEFE</code>，这个范围可以表示23901个汉字。
基本够用了吧，GB2312才7000多个呢！GBK更猛，编码范围是从<code>0x8140-0xFEFE</code>，可以表示3万多个汉字。
可以看出，这两种方案，都能保证汉字头一个字节在0x7f以上，从而和ASCII不会发生冲突。能够实现英文和汉字同时显示。</p>
<p>BIG5，香港和台湾用的比较多，繁体，范围：<code>0xA140-0xF9FE</code>，<code>0xA1A1-0xF9FE</code>，每个字由两个字节组成，
其第一字节编码范围为<code>0xA1-0xF9</code>，第二字节编码范围为<code>0x40-0x7E</code>与<code>0xA1-0xFE</code>，
总计收入13868个字（包括5401个常用字、7652个次常用字、7个扩充字、以及808个各式符号）。</p>
<p>那么到底ANSI是多少位呢？这个不一定！比如在GB2312和GBK，BIG5中，是两位！
但是其他标准或者其他语言如果不够用，就完全可能不止两位！</p>
<p>例如：GB18030:GB18030-2000（GBK2K）在GBK的基础上进一步扩展了汉字，增加了藏、蒙等少数民族的字形。
GBK2K从根本上解决了字位不够，字形不足的问题。它有几个特点：它并没有确定所有的字形，只是规定了编码范围，
留待以后扩充。编码是变长的，其二字节部分与GBK兼容；四字节部分是扩充的字形、字位，
其编码范围是首字节<code>0x81-0xfe</code>、二字节<code>0x30-0x39</code>、三字节<code>0x81-0xfe</code>、四字节<code>0x30-0x39</code>。
它的推广是分阶段的，首先要求实现的是能够完全映射到Unicode3.0标准的所有字形。它是国家标准，是强制性的。</p>
<p>搞懂了ANSI的含义，我们发现ANSI有个致命的缺陷，就是每个标准是各自为阵的，不保证能兼容。
换句话说，要同时显示中文和日本文或者阿拉伯文，就完全可能会出现一个编码两个字符集里面都有对应，
不知道该显示哪一个的问题，也就是编码重叠的问题。显然这样的方案不好，所以Unicode才会出现！</p>
<h2 id="MBCS（Multi-Byte-Chactacter-System（Set））"><a href="#MBCS（Multi-Byte-Chactacter-System（Set））" class="headerlink" title="MBCS（Multi-Byte Chactacter System（Set））"></a>MBCS（Multi-Byte Chactacter System（Set））</h2><p>多字节字符系统或者字符集，基于ANSI编码的原理上，对一个字符的表示实际上无法确定他需要占用几个字节的，
只能从编码本身来区分和解释。因此计算机在存储的时候，就是采用多字节存储的形式。
也就是你需要几个字节我给你放几个字节，比如A我给你放一个字节，比如”中“，我就给你放两个字节，
这样的字符表示形式就是MBCS。在基于GBK的windows中，不会超过2个字节，
所以windows这种表示形式有叫做DBCS（Double-Byte Chactacter System），
其实算是MBCS的一个特例。C语言默认存放字符串就是用的MBCS格式。从原理上来说，这样是非常经济的一种方式。</p>
<h2 id="CodePage"><a href="#CodePage" class="headerlink" title="CodePage"></a>CodePage</h2><p>代码页，最早来自IBM，后来被微软，oracle，SAP等广泛采用。因为ANSI编码每个国家都不统一，不兼容，
可能导致冲突，所以一个系统在处理文字的时候，必须要告诉计算机你的ANSI是哪个国家和地区的标准，
这种国家和标准的代号（其实就是字符编码格式的代号），微软称为Codepage代码页，
其实这个代码页和字符集编码的意思是一样的。告诉你代码页，本质就是告诉了你编码格式。
但是不同厂家的代码页可能是完全不同，哪怕是同样的编码，比如，UTF-8字符编码在IBM对应的代码页是1208，
在微软对应的是65001，在德国的SAP公司对应的是4110。
所以啊，其实本来就是一个东西，大家各自为政，搞那么多新名词，实在没必要！所以标准还是很重要的！！！</p>
<p>比如GBK的在微软的代码页是936，告诉你代码页是936其实和告诉你我编码格式是GBK效果完全相同。
那么处理文本的时候就不会有问题，不会去考虑某个代码是显示的韩文还是中文，同样，日文和韩文的代码页就和中文不同，
这样就可以避免编码冲突导致计算机不知如何处理的问题。当然用这个也可以很容易的切换语言版本。
但是这都是治标不治本的方法，还是无法解决同时显示多种语言的问题，所以最后还是都用unicode吧，永远不会有冲突了。</p>
<h2 id="Unicode（Universal-Code）"><a href="#Unicode（Universal-Code）" class="headerlink" title="Unicode（Universal Code）"></a>Unicode（Universal Code）</h2><p>这是一个编码方案，说白了就是一张包含全世界所有文字的一个编码表，不管你用的上，用不上，不管是现在用的，
还是以前用过的，只要这个世界上存在的文字符号，统统给你一个唯一的编码，这样就不可能有任何冲突了。
不管你要同时显示任何文字，都没有问题。</p>
<p>因此在这样的方案下，Unicode出现了。Unicode编码范围是：<code>0-0x10FFFF</code>，可以容纳1114112个字符，100多万啊。
全世界的字符根本用不完了，Unicode5.0版本中，才用了238605个码位。
所以足够了。因此从码位范围看，严格的unicode需要3个字节来存储。
但是考虑到理解性和计算机处理的方便性，理论上还是用4个字节来描述。</p>
<p>Unicode采用的汉字相关编码用的是《CJK统一汉字编码字符集》—国家标准GB13000.1是完全等同于国际标准《通用多八位编码字符集（UCS）》ISO10646.1。
《GB13000.1》中最重要的也经常被采用的是其双字节形式的基本多文种平面。在这65536个码位的空间中，
定义了几乎所有国家或地区的语言文字和符号。其中从<code>0x4E00-0x9FA5</code>的连续区域包含了20902个来自中国（包括台湾）、日本、韩国的汉字，
称为CJK（Chinese、Japanese、Korean）汉字。CJK是《GB2312-80》、《BIG5》等字符集的超集。</p>
<p>CJK包含了中国，日本，韩国，越南，香港，也就是CJKVH。这个在UNICODE的Charset chart中可以明显看到。
unicode的相关标准可以从unicode.org上面获得，目前已经进行到了6.0版本。</p>
<p>下面这段描述来自百度百科：</p>
<blockquote>
<p>Unicode字符集可以简写为UCS（Unicode Character Set）。早期的Unicode标准有UCS-2、UCS-4的说法。
UCS-2用两个字节编码，UCS-4用4个字节编码。UCS-4根据最高位为0的最高字节分成2^7=128个group。
每个group再根据次高字节分为256个平面（plane）。每个平面根据第3个字节分为256行（row），每行有256个码位（cell）。
group0的平面0被称作BMP（Basic Multilingual Plane）。将UCS-4的BMP去掉前面的两个零字节就得到了UCS-2。　　</p>
<p>每个平面有2^16=65536个码位。Unicode计划使用了17个平面，一共有17*65536=1114112个码位。
在Unicode5.0.0版本中，已定义的码位只有238605个，分布在平面0、平面1、平面2、平面14、平面15、平面16。
其中平面15和平面16上只是定义了两个各占65534个码位的专用区（Private Use Area），分别是<code>0xF0000-0xFFFFD</code>和<code>0x100000-0x10FFFD</code>。</p>
<p>所谓专用区，就是保留给大家放自定义字符的区域，可以简写为PUA。</p>
<p>平面0也有一个专用区：<code>0xE000-0xF8FF</code>，有6400个码位。平面0的<code>0xD800-0xDFFF</code>，共2048个码位，是一个被称作代理区（Surrogate）的特殊区域。
代理区的目的用两个UTF-16字符表示BMP以外的字符。在介绍UTF-16编码时会介绍。　　</p>
<p>如前所述在Unicode5.0.0版本中，<code>238605-65534*2-6400-2408=99089</code>。
余下的99089个已定义码位分布在平面0、平面1、平面2和平面14上，它们对应着Unicode目前定义的99089个字符，
其中包括71226个汉字。平面0、平面1、平面2和平面14上分别定义了52080、3419、43253和337个字符。</p>
<p>平面2的43253个字符都是汉字。平面0上定义了27973个汉字。</p>
</blockquote>
<h2 id="Unicode的实现方案"><a href="#Unicode的实现方案" class="headerlink" title="Unicode的实现方案"></a>Unicode的实现方案</h2><p>Unicode其实只是一张巨大的编码表。要在计算机里面实现，也出现了几种不同的方案。也就是说如何表示unicode编码的问题。</p>
<h3 id="UTF-8（UCS-Transformation-Format-8bit）"><a href="#UTF-8（UCS-Transformation-Format-8bit）" class="headerlink" title="UTF-8（UCS Transformation Format 8bit）"></a>UTF-8（UCS Transformation Format 8bit）</h3><p>这个方案的意思以8位为单位来标识文字，注意并不是说一个文字用8位标识。他其实是一种MBCS方案，可变字节的。
到底需要几个字节表示一个符号，这个要根据这个符号的unicode编码来决定，最多4个字节。</p>
<p>编码规则如下：</p>
<table>
<thead>
<tr>
<th>Unicode编码（16进制）</th>
<th>UTF-8字节流（二进制）</th>
</tr>
</thead>
<tbody>
<tr>
<td>000000-00007F</td>
<td>0xxxxxxx</td>
</tr>
<tr>
<td>000080-0007FF</td>
<td>110xxxxx 10xxxxxx</td>
</tr>
<tr>
<td>000800-00FFFF</td>
<td>1110xxxx 10xxxxxx 10xxxxxx</td>
</tr>
<tr>
<td>010000-10FFFF</td>
<td>11110xxx 10xxxxxx 10xxxxxx 10xxxxxx</td>
</tr>
</tbody>
</table>
<p>UTF-8的特点是对不同范围的字符使用不同长度的编码。对于<code>0x00-0x7F</code>之间的字符，UTF-8编码与ASCII编码完全相同。</p>
<p>UTF-8编码的最大长度是4个字节。从上表可以看出，4字节模板有21个x，即可以容纳21位二进制数字。
Unicode的最大码位<code>0x10FFFF</code>也只有21位。</p>
<p><strong>例1：</strong>「汉」字的Unicode编码是<code>0x6C49</code>。<code>0x6C49</code>在<code>0x0800-0xFFFF</code>之间，使用用3字节模板了：<code>1110xxxx 10xxxxxx 10xxxxxx</code>。
将0x6C49写成二进制是：<code>0110 1100 0100 1001</code>，用这个比特流依次代替模板中的x，得到：<code>11100110 10110001 10001001</code>，即<code>E6 B1 89</code>。</p>
<p><strong>例2：</strong>Unicode编码<code>0x20C30</code>在<code>0x010000-0x10FFFF</code>之间，使用用4字节模板了：<code>11110xxx 10xxxxxx 10xxxxxx 10xxxxxx</code>。
将<code>0x20C30</code>写成21位二进制数字（不足21位就在前面补0）：<code>0 0010 0000 1100 0011 0000</code>，用这个比特流依次代替模板中的x，
得到：<code>11110000 10100000 10110000 10110000</code>，即<code>F0 A0 B0 B0</code>。</p>
<h3 id="UTF-16（UCS-Transformation-Format-16bit）"><a href="#UTF-16（UCS-Transformation-Format-16bit）" class="headerlink" title="UTF-16（UCS Transformation Format 16bit）"></a>UTF-16（UCS Transformation Format 16bit）</h3><p>UTF-16编码以16位无符号整数为单位。注意是16位为一个单位，不表示一个字符就只有16位。
现在机器上的unicode编码一般指的就是UTF-16。绝大部分2个字节就够了，但是不能绝对的说所有字符都是2个字节。
这个要看字符的unicode编码处于什么范围而定，有可能是2个字节，也可能是4个字节。这点请注意！</p>
<h3 id="UTF-32（UCS-Transformation-Format-32bit）"><a href="#UTF-32（UCS-Transformation-Format-32bit）" class="headerlink" title="UTF-32（UCS Transformation Format 32bit）"></a>UTF-32（UCS Transformation Format 32bit）</h3><p>这个就简单了，和Unicode码表基本一一对应，固定四个字节。</p>
<p>为什么不采用UTF-32呢，因为unicode定义的范围太大了，其实99%的人使用的字符编码不会超过2个字节，
所以如同统一用4个字节，简单倒是简单了，但是数据冗余确实太大了，不好，所以16位是最好的。
就算遇到超过16位能表示的字符，我们也可以通过上面讲到的代理技术，采用32位标识，这样的方案是最好的。
所以现在绝大部分机器实现unicode还是采用的utf-16的方案。当然也有UTF-8的方案。
比如windows用的就是UTF16方案，不少linux用的就是utf8方案。</p>
<h2 id="编码存储差异"><a href="#编码存储差异" class="headerlink" title="编码存储差异"></a>编码存储差异</h2><p>这里就要引出两个名词：</p>
<ul>
<li><p>LE（little endian）：小字节字节序，意思就是一个单元在计算机中的存放时按照低位在前（低地址），高位在后（高地址）的模式存放。</p>
</li>
<li><p>BE（big endian）：大字节字节序，和LE相反，是高位在前，低位在后。</p>
</li>
</ul>
<p>比如一个unicode编码为：<code>0x006C49</code>，如果是LE，那么在文件中的存放顺序应该是：<code>49 6c 00</code>如果是BE，那么顺序应该是：<code>00 6c 49</code>。</p>
<h2 id="编码格式的检测"><a href="#编码格式的检测" class="headerlink" title="编码格式的检测"></a>编码格式的检测</h2><p>到底采用什么编码，如果能检测就好了。专家们也是这么想的，所以专家给每种格式和字节序规定了一些特殊的编码，
这些编码在unicode中是没有使用的，所以不用担心会冲突。
这个叫做BOM（Byte Order Mark）头。意思是字节序标志头。通过它基本能确定编码格式和字节序。</p>
<table>
<thead>
<tr>
<th>UTF编码</th>
<th>Byte Order Mark</th>
</tr>
</thead>
<tbody>
<tr>
<td>UTF-8</td>
<td>EF BB BF</td>
</tr>
<tr>
<td>UTF-16LE</td>
<td>FF FE</td>
</tr>
<tr>
<td>UTF-16BE</td>
<td>FE FF</td>
</tr>
<tr>
<td>UTF-32LE</td>
<td>FF FE 00 00</td>
</tr>
<tr>
<td>UTF-32BE</td>
<td>00 00 FE FF</td>
</tr>
</tbody>
</table>
<p>所以通过检测文件前面的BOM头，基本能确定编码格式和字节序。
但是这个BOM头只是建议添加，不是强制的，所以不少软件和系统没有添加这个BOM头（所以有些软件格式中有带BOM头和NoBOM头的选择），
这个时候要检测什么格式，就比较麻烦了当然可以检测，但是不能保证100%准确，
只能通过编码范围从概率上来检查，虽然准确度还是比较高，但是不能保证100%。
所以，时常看到检测错误的软件，也不奇怪了。</p>
<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>终于写完了，其实这些问题都是不统一导致的，属于历史问题，所以才会有这些困惑，
这里也呼吁所有的软件开发人员自觉的采用Unicode标准进行文字处理，我相信在不久的将来，
这些困扰都不会存在了，因为所有软件都是unicoded，只要有字库，任何文字都能同时显示，
也可以到任何语言的平台上的去运行，不再有乱码的困惑！</p>
<p>其实现在绝大部分软件已经是这么做的了！</p>
<p>另外也不要被很多名词属于所迷惑，其实这些只是标准的问题，根本没有什么新的东西，更没有什么复杂的东西。</p>
<p>转载自：<a href="http://blog.sina.com.cn/s/blog_4aa887440101arks.html" target="_blank" rel="noopener">http://blog.sina.com.cn/s/blog_4aa887440101arks.html</a></p>

    </div>

    
    
    

      <footer class="post-footer">

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/2018/07/16/docker-letsencrypt/" rel="prev" title="Deploying Nginx and Letsencrypt in Docker">
      <i class="fa fa-chevron-left"></i> Deploying Nginx and Letsencrypt in Docker
    </a></div>
      <div class="post-nav-item">
    <a href="/2018/07/21/base64/" rel="next" title="Base64">
      Base64 <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          
    
  <div class="comments">
    <div id="disqus_thread">
      <noscript>Please enable JavaScript to view the comments powered by Disqus.</noscript>
    </div>
  </div>
  

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#ASCII%EF%BC%88American-Standard-Code-for-Information-Interchange%EF%BC%89"><span class="nav-number">1.</span> <span class="nav-text">ASCII（American Standard Code for Information Interchange）</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#ANSI%EF%BC%88American-National-Standard-Institite%EF%BC%89"><span class="nav-number">2.</span> <span class="nav-text">ANSI（American National Standard Institite）</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#MBCS%EF%BC%88Multi-Byte-Chactacter-System%EF%BC%88Set%EF%BC%89%EF%BC%89"><span class="nav-number">3.</span> <span class="nav-text">MBCS（Multi-Byte Chactacter System（Set））</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#CodePage"><span class="nav-number">4.</span> <span class="nav-text">CodePage</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Unicode%EF%BC%88Universal-Code%EF%BC%89"><span class="nav-number">5.</span> <span class="nav-text">Unicode（Universal Code）</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Unicode%E7%9A%84%E5%AE%9E%E7%8E%B0%E6%96%B9%E6%A1%88"><span class="nav-number">6.</span> <span class="nav-text">Unicode的实现方案</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#UTF-8%EF%BC%88UCS-Transformation-Format-8bit%EF%BC%89"><span class="nav-number">6.1.</span> <span class="nav-text">UTF-8（UCS Transformation Format 8bit）</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#UTF-16%EF%BC%88UCS-Transformation-Format-16bit%EF%BC%89"><span class="nav-number">6.2.</span> <span class="nav-text">UTF-16（UCS Transformation Format 16bit）</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#UTF-32%EF%BC%88UCS-Transformation-Format-32bit%EF%BC%89"><span class="nav-number">6.3.</span> <span class="nav-text">UTF-32（UCS Transformation Format 32bit）</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%BC%96%E7%A0%81%E5%AD%98%E5%82%A8%E5%B7%AE%E5%BC%82"><span class="nav-number">7.</span> <span class="nav-text">编码存储差异</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%BC%96%E7%A0%81%E6%A0%BC%E5%BC%8F%E7%9A%84%E6%A3%80%E6%B5%8B"><span class="nav-number">8.</span> <span class="nav-text">编码格式的检测</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%80%BB%E7%BB%93"><span class="nav-number">9.</span> <span class="nav-text">总结</span></a></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="hypc"
      src="/images/avatar.gif">
  <p class="site-author-name" itemprop="name">hypc</p>
  <div class="site-description" itemprop="description">业精于勤荒于嬉, 行成于思毁于随~</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">342</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">157</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/hypc" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;hypc" rel="noopener" target="_blank"><i class="fa fa-fw fa-github"></i>GitHub</a>
      </span>
  </div>


  <div class="links-of-blogroll motion-element">
    <div class="links-of-blogroll-title">
      <i class="fa fa-fw fa-link"></i>
      Links
    </div>
    <ul class="links-of-blogroll-list">
        <li class="links-of-blogroll-item">
          <a href="https://hypc-pub.github.io/json-schema-tutorial/" title="https:&#x2F;&#x2F;hypc-pub.github.io&#x2F;json-schema-tutorial&#x2F;" rel="noopener" target="_blank">JSONSchema Tutorial</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="https://hypc-pub.github.io/redis-tutorial/" title="https:&#x2F;&#x2F;hypc-pub.github.io&#x2F;redis-tutorial&#x2F;" rel="noopener" target="_blank">Redis Tutorial</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="https://hypc-pub.github.io/lua-tutorial/" title="https:&#x2F;&#x2F;hypc-pub.github.io&#x2F;lua-tutorial&#x2F;" rel="noopener" target="_blank">Lua Tutorial</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="https://hypc-pub.github.io/design-patterns/" title="https:&#x2F;&#x2F;hypc-pub.github.io&#x2F;design-patterns&#x2F;" rel="noopener" target="_blank">Design Patterns</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="https://hypc-pub.github.io/rfc6749/" title="https:&#x2F;&#x2F;hypc-pub.github.io&#x2F;rfc6749&#x2F;" rel="noopener" target="_blank">RFC6749</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="https://hypc-pub.github.io/django-tutorial/" title="https:&#x2F;&#x2F;hypc-pub.github.io&#x2F;django-tutorial&#x2F;" rel="noopener" target="_blank">Django Tutorial</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="https://hypc-pub.github.io/python-style-guide/" title="https:&#x2F;&#x2F;hypc-pub.github.io&#x2F;python-style-guide&#x2F;" rel="noopener" target="_blank">Python Style Guide</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="https://hypc-pub.github.io/volere-requirements-specification-template/" title="https:&#x2F;&#x2F;hypc-pub.github.io&#x2F;volere-requirements-specification-template&#x2F;" rel="noopener" target="_blank">Volere Requirements Specification Template</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="https://hypc-pub.github.io/gopl-zh/" title="https:&#x2F;&#x2F;hypc-pub.github.io&#x2F;gopl-zh&#x2F;" rel="noopener" target="_blank">The Go Programming Language</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="https://hypc-pub.github.io/advanced-go-programming-book/" title="https:&#x2F;&#x2F;hypc-pub.github.io&#x2F;advanced-go-programming-book&#x2F;" rel="noopener" target="_blank">Advanced Go Programming</a>
        </li>
    </ul>
  </div>

      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">hypc</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Gemini</a>
  </div>

        
<div class="busuanzi-count">
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    <span class="post-meta-item" id="busuanzi_container_site_uv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-user"></i>
      </span>
      <span class="site-uv" title="Total Visitors">
        <span id="busuanzi_value_site_uv"></span>
      </span>
    </span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item" id="busuanzi_container_site_pv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-eye"></i>
      </span>
      <span class="site-pv" title="Total Views">
        <span id="busuanzi_value_site_pv"></span>
      </span>
    </span>
</div>








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  




  
<script src="/js/local-search.js"></script>













  

  

<script>
  function loadCount() {
    var d = document, s = d.createElement('script');
    s.src = 'https://hypc.disqus.com/count.js';
    s.id = 'dsq-count-scr';
    (d.head || d.body).appendChild(s);
  }
  // defer loading until the whole page loading is completed
  window.addEventListener('load', loadCount, false);
</script>
<script>
  var disqus_config = function() {
    this.page.url = "https://hypc.github.io/2018/07/21/character-encoding/";
    this.page.identifier = "/2018/07/21/character-encoding/";
    this.page.title = "【转载】字符编码";
    };
  NexT.utils.loadComments(document.querySelector('#disqus_thread'), () => {
    if (window.DISQUS) {
      DISQUS.reset({
        reload: true,
        config: disqus_config
      });
    } else {
      var d = document, s = d.createElement('script');
      s.src = 'https://hypc.disqus.com/embed.js';
      s.setAttribute('data-timestamp', '' + +new Date());
      (d.head || d.body).appendChild(s);
    }
  });
</script>

</body>
</html>
